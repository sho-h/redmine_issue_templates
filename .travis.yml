sudo: required
language: ruby
services:
  - docker
env:
  - RUBY_VER=2.6.0-preview2 REDMINE_VER=master
  - RUBY_VER=2.6.0-preview2 REDMINE_VER=3.4-stable
  - RUBY_VER=2.5 REDMINE_VER=master
  - RUBY_VER=2.5 REDMINE_VER=3.4-stable
  - RUBY_VER=2.4 REDMINE_VER=master
  - RUBY_VER=2.4 REDMINE_VER=3.4-stable
  - RUBY_VER=2.3 REDMINE_VER=master
  - RUBY_VER=2.3 REDMINE_VER=3.4-stable
  - RUBY_VER=2.3 REDMINE_VER=3.3-stable
  - RUBY_VER=2.3 REDMINE_VER=3.2.9
  # Needs Ruby lower than 2.3
  # - RUBY_VER=2.3 REDMINE_VER=3.1.7
  # - RUBY_VER=2.3 REDMINE_VER=3.0.7
before_install:
  - docker build -t akiko-pusu/redmine_issue_templates:${RUBY_VER} --build-arg RUBY_VER=${RUBY_VER} --file=Dockerfile.travis .
script:
  - docker run -e REDMINE_VER=${REDMINE_VER} -e TRAVIS_BRANCH=${TRAVIS_BRANCH} akiko-pusu/redmine_issue_templates:${RUBY_VER}
